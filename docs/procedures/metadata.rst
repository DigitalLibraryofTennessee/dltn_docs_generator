================================
Metadata Mapping and Remediation
================================

-----
About
-----

Metadata from the Digital Library of Tennessee is shared to the Digital Public Library of America as `MODS v3.5 <http://www.loc.gov/standards/mods/mods-outline-3-5.html>`_
where it is mapped to `DPLA Map v4.0 <https://drive.google.com/file/d/1743zMwrrZQFleAZiMZNe_f5H3TXv6Iyg/view>`_. While DLTN
wrote and adopted a `metadata application profile <https://drive.google.com/file/d/0B0gzQfRomUx2ekpubmQ3cEZEQWM/view>`_
in 2016, the metadata application profile does not precisely align with `our mapping to Map 4 <https://docs.google.com/spreadsheets/d/1BzZvDOf4fgas3TD21xF40lu2pk2XW0k2pTGJKIt6438/edit#gid=102934983>`_.
Because of this, the DLTN committee provides `a crosswalk from many popular metadata formats <https://docs.google.com/spreadsheets/d/12igrVUZ0cj26i1Xt_haq9F-mf7AWtUWzvNGsrfHK_iU/edit?usp=sharing>`_
to DLTN MODS and MAP v.4 to help providers ready their metadata for participation in DLTN.

------------------------
Metadata Transformations
------------------------

`DLTN_XSLT <https://github.com/DigitalLibraryofTennessee/DLTN_XSLT>`_ is the Git repository where all current metadata
transforms are maintained. When possible, transforms are written at the provider level. While legacy transforms do not
necessarily follow this practice, all current transforms are written around an `identity transform <http://www.usingxml.com/Transforms/XslIdentity>`_.
By following this practice, our XSL transforms are more easily modified when new needs arise.

Most legacy transforms may make use of a remediation template for `genres <https://github.com/DigitalLibraryofTennessee/DLTN_XSLT/blob/master/XSLT/remediationgettygenre.xsl>`_
or `subjects <https://github.com/DigitalLibraryofTennessee/DLTN_XSLT/blob/master/XSLT/remediationlcshtopics.xsl>`_.  These
transforms replace strings and insert URIs into the output MODS record.

----------------------
ContentDM IIIF Mapping
----------------------

DLTN automatically generates and provides a link to the IIIF manifest of an object for ContentDM providers when one exists.
The manifest is generated by the `content_dm_catalog_manifest_generator <https://github.com/DigitalLibraryofTennessee/contentdm_catalog_manifest_generator>`_.
The code here creates an XML record of all objects in a set that have a IIIF manifest.  This is necessary since compound
objects in ContentDM do not have a IIIF manifest (only the parts have a manifest).  The XML record is then parsed by the
corresponding XSL transform and the IIIF manifest in included in the MODS record at /mods:location/mods:url[@note="iiif-manifest"].

-----------
Metadata QA
-----------

Before new sets are added or existing sets are reharvested, all records from a set are piped into MongoDB using
dltn_metadata_QA. This messy at best application provides an easy mechanism for us to understand metadata practices across
an entire collection.  variety.js is an additional tool that we use to analyze an entire collection and look for records
that do not meet our minimum requirements.

----------
References
----------

* `2016 Metadata Application Profile <https://drive.google.com/file/d/0B0gzQfRomUx2ekpubmQ3cEZEQWM/view>`_
* `DLTN MODS to Map 4 <https://docs.google.com/spreadsheets/d/1BzZvDOf4fgas3TD21xF40lu2pk2XW0k2pTGJKIt6438/edit#gid=102934983>`_
* `DLTN Crosswalks <https://docs.google.com/spreadsheets/d/12igrVUZ0cj26i1Xt_haq9F-mf7AWtUWzvNGsrfHK_iU/edit?usp=sharing>`_